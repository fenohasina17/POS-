<div class="bg-white rounded-3xl flex flex-col h-full shadow">
  <!-- PANIER VIDE -->
  <div
    *ngIf="cart.length === 0"
    class="flex-1 w-full p-4 opacity-25 flex flex-col justify-center items-center"
  >
    <svg class="w-8 h-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2 9h12l-2-9m-6 0V6a1 1 0 011-1h2a1 1 0 011 1v7"
      />
    </svg>
    <p class="mt-4">Panier vide</p>
  </div>

  <!-- PANIER REMPLI -->
  <div *ngIf="cart.length > 0" class="flex-1 flex flex-col overflow-auto">
    <div
      *ngFor="let item of cart"
      class="border-b p-4 flex gap-4 items-start justify-between text-sm"
    >
      <div class="flex flex-col gap-1 flex-1">
        <div class="flex justify-between gap-4">
          <span class="font-semibold">{{ item.name }}</span>
          <button
            (click)="removeItem(item)"
            class="hover:text-red-500 text-gray-400"
          >
            &times;
          </button>
        </div>
        <span class="text-xs text-gray-400">{{ item.price | currency:'EUR' }}</span>
        <!-- <span class="text-xs text-gray-500">{{ item.note }}</span> -->
        <div class="flex justify-between items-center mt-2">
          <div class="flex items-center gap-2 text-sm">
            <button
              (click)="addQty(item, -1)"
              class="w-6 h-6 rounded-full border flex items-center justify-center"
            >
              -
            </button>
            <input
              type="number"
              [(ngModel)]="item.qty"
              (change)="addQty(item, 0)"
              class="w-10 text-center border rounded"
            />
            <button
              (click)="addQty(item, 1)"
              class="w-6 h-6 rounded-full border flex items-center justify-center"
            >
              +
            </button>
          </div>
          <span class="font-semibold">{{
            (item.qty * item.price) | currency:'EUR'
          }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- PIED DE PANIER -->
  <div class="border-t p-4">
    <div class="text-sm flex justify-between items-center mb-2">
      <span>Total</span>
      <span class="text-lg font-semibold">
        {{ getTotalPrice() | currency:'EUR' }}
      </span>
    </div>

<input
  type="text"
  placeholder="EspÃ¨ces"
  [value]="cash"
  (input)="updateCash($event)"
  class="text-right text-lg w-full border px-2 py-1 rounded mb-2"
/>

    <div *ngIf="change > 0" class="text-green-600 text-sm">
      Rendu monnaie : {{ change | currency:'EUR' }}
    </div>
    <div *ngIf="change < 0" class="text-red-600 text-sm">
      Montant insuffisant
    </div>

    <button
      class="mt-4 w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded disabled:opacity-50"
      [disabled]="!submitable()"
      (click)="submit()"
    >
      Soumettre
    </button>
  </div>
</div>
